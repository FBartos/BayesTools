<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>BayesTools • BayesTools</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css"><script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet"><script src="pkgdown.js"></script><meta property="og:title" content="BayesTools"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-title-body">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">BayesTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.22</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="articles/ComparisonR.html">Comparison to other R packages</a>
    </li>
    <li>
      <a href="articles/SpikeAndSlab.html">Bayes factors via spike and slab prior vs. bridge sampling</a>
    </li>
  </ul></li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/FBartos/BayesTools/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>BayesTools</h1>
    </div>

<div id="bayestools" class="section level1">

<p>BayesTools is an R package that provides tools for conducting Bayesian analyses and Bayesian model averaging. The package contains functions for creating prior distribution objects, automating JAGS model syntax generation, mixing posterior samples, and generating summary tables for Bayesian inference.</p>
<p>Always reference these instructions first and fallback to search or bash commands only when you encounter unexpected information that does not match the info here.</p>
<div class="section level2">
<h2 id="working-effectively">Working Effectively<a class="anchor" aria-label="anchor" href="#working-effectively"></a></h2>
<p>Bootstrap, build, and test the repository: - Install system dependencies: <code>sudo apt update &amp;&amp; sudo apt install -y jags r-cran-devtools r-cran-testthat r-cran-rjags</code> - Install the package: <code>R -e "devtools::install()"</code> – takes 2 minutes. NEVER CANCEL. Set timeout to 5+ minutes. - Run tests: <code>R -e "devtools::test()"</code> – takes 15 minutes. NEVER CANCEL. Set timeout to 30+ minutes. - Run targeted tests: <code>R -e "devtools::test(filter = 'priors')"</code> – takes 1-5 minutes. Preferred during development. - Run R CMD check: <code>R -e "rcmdcheck::rcmdcheck(args = c('--no-manual', '--as-cran', '--ignore-vignettes'), build_args = c('--no-build-vignettes'), error_on = 'never', check_dir = 'check')"</code> – takes 1 minute. Set timeout to 5+ minutes. - Update documentation: <code>R -e "devtools::document()"</code> – takes 30 seconds. Set timeout to 2+ minutes.</p>
</div>
<div class="section level2">
<h2 id="validation">Validation<a class="anchor" aria-label="anchor" href="#validation"></a></h2>
<ul><li>
<strong>CRITICAL VALIDATION</strong>: Always test basic package functionality after making changes by running: <code>R -e "library(BayesTools); p &lt;- prior('normal', list(0, 1)); print(p); plot(p)"</code>
</li>
<li>
<strong>NEVER CANCEL</strong> any R CMD operations - builds and tests may take 15+ minutes but must complete</li>
<li>Always run <code><a href="https://devtools.r-lib.org/reference/document.html" class="external-link">devtools::document()</a></code> after modifying roxygen2 comments or function signatures</li>
<li>Always run <code><a href="http://r-lib.github.io/rcmdcheck/reference/rcmdcheck.html" class="external-link">rcmdcheck::rcmdcheck()</a></code> before finalizing changes to ensure CRAN compliance</li>
<li>Test the specific functionality you modified - BayesTools has three main areas:
<ol style="list-style-type: decimal"><li>
<strong>Prior distributions</strong>: Test with <code><a href="reference/prior.html">prior()</a></code> function and plotting</li>
<li>
<strong>JAGS integration</strong>: Test with <code><a href="reference/JAGS_fit.html">JAGS_fit()</a></code> for model fitting (requires longer running time)</li>
<li>
<strong>Model averaging</strong>: Test with posterior mixing functions</li>
</ol></li>
</ul></div>
<div class="section level2">
<h2 id="cran-compliance-and-package-standards">CRAN Compliance and Package Standards<a class="anchor" aria-label="anchor" href="#cran-compliance-and-package-standards"></a></h2>
<ul><li>
<strong>STRICT REQUIREMENT</strong>: All code must follow CRAN guidelines</li>
<li>Use snake_case for function and variable names throughout the codebase</li>
<li>All exported functions require complete roxygen2 documentation with @param, @return, @examples</li>
<li>Place R scripts in R/ directory, tests in tests/testthat/, vignettes in vignettes/</li>
<li>Use message(), warning(), and stop() for user feedback instead of hardcoded messages</li>
<li>Maintain API compatibility with downstream packages that re-export BayesTools functions</li>
<li>Type-check all user-facing output since functions are often re-exported</li>
</ul></div>
<div class="section level2">
<h2 id="system-requirements">System Requirements<a class="anchor" aria-label="anchor" href="#system-requirements"></a></h2>
<ul><li>
<strong>JAGS &gt;= 4.3.0</strong> is required and must be installed system-wide before running tests</li>
<li>R version 4.0+ with key dependencies: rjags, runjags, bridgesampling, coda, mvtnorm, extraDistr</li>
<li>For development: devtools, testthat, vdiffr, rcmdcheck</li>
<li>
<strong>Note</strong>: Some tests are skipped on different OS platforms due to numerical precision differences</li>
</ul></div>
<div class="section level2">
<h2 id="common-tasks">Common Tasks<a class="anchor" aria-label="anchor" href="#common-tasks"></a></h2>
<div class="section level3">
<h3 id="build-and-install-package">Build and Install Package<a class="anchor" aria-label="anchor" href="#build-and-install-package"></a></h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># From repository root</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/install.html" class="external-link">install</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><strong>Timing</strong>: 2 minutes. <strong>NEVER CANCEL</strong> - set timeout to 5+ minutes.</p>
</div>
<div class="section level3">
<h3 id="run-complete-test-suite">Run Complete Test Suite<a class="anchor" aria-label="anchor" href="#run-complete-test-suite"></a></h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/test.html" class="external-link">test</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><strong>Timing</strong>: 15 minutes for full suite. <strong>NEVER CANCEL</strong> - set timeout to 30+ minutes.</p>
</div>
<div class="section level3">
<h3 id="run-subset-of-tests-recommended-for-development">Run Subset of Tests (Recommended for Development)<a class="anchor" aria-label="anchor" href="#run-subset-of-tests-recommended-for-development"></a></h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Run tests matching a pattern - preferred in initial stages of updates</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/test.html" class="external-link">test</a></span><span class="op">(</span>filter <span class="op">=</span> <span class="st">"priors"</span><span class="op">)</span>        <span class="co"># Run only prior-related tests</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/test.html" class="external-link">test</a></span><span class="op">(</span>filter <span class="op">=</span> <span class="st">"JAGS"</span><span class="op">)</span>          <span class="co"># Run only JAGS-related tests  </span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/test.html" class="external-link">test</a></span><span class="op">(</span>filter <span class="op">=</span> <span class="st">"model-averaging"</span><span class="op">)</span> <span class="co"># Run only model averaging tests</span></span></code></pre></div>
<p><strong>Timing</strong>: 1-5 minutes depending on subset. Use this to target specific functionality during development.</p>
<p><strong>Notes</strong>: Many tests are skipped on CRAN to reduce build time. Visual regression tests (vdiffr) may fail in different environments - this is expected.</p>
</div>
<div class="section level3">
<h3 id="r-cmd-check-cran-validation">R CMD Check (CRAN Validation)<a class="anchor" aria-label="anchor" href="#r-cmd-check-cran-validation"></a></h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rcmdcheck</span><span class="fu">::</span><span class="fu"><a href="http://r-lib.github.io/rcmdcheck/reference/rcmdcheck.html" class="external-link">rcmdcheck</a></span><span class="op">(</span></span>
<span>  args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"--no-manual"</span>, <span class="st">"--as-cran"</span>, <span class="st">"--ignore-vignettes"</span><span class="op">)</span>,</span>
<span>  build_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"--no-build-vignettes"</span><span class="op">)</span>,</span>
<span>  error_on <span class="op">=</span> <span class="st">"never"</span>,</span>
<span>  check_dir <span class="op">=</span> <span class="st">"check"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Timing</strong>: 1 minute. <strong>NEVER CANCEL</strong> - set timeout to 5+ minutes.</p>
</div>
<div class="section level3">
<h3 id="update-documentation">Update Documentation<a class="anchor" aria-label="anchor" href="#update-documentation"></a></h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/document.html" class="external-link">document</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><strong>Timing</strong>: 30 seconds. Always run after modifying roxygen2 comments.</p>
</div>
</div>
<div class="section level2">
<h2 id="key-repository-structure">Key Repository Structure<a class="anchor" aria-label="anchor" href="#key-repository-structure"></a></h2>
<div class="section level3">
<h3 id="repository-root">Repository root:<a class="anchor" aria-label="anchor" href="#repository-root"></a></h3>
<pre><code>.
├── DESCRIPTION          # Package metadata and dependencies
├── NAMESPACE           # Exported functions (auto-generated)
├── README.Rmd          # Source for README.md (edit this, not README.md)
├── README.md           # Generated from README.md
├── BayesTools.Rproj    # RStudio project file
├── R/                  # All R source code
├── man/                # Documentation (auto-generated from roxygen2)
├── tests/              # Test suite
├── vignettes/          # Package vignettes
├── data/               # Package datasets
├── inst/               # Additional package files
└── .github/            # GitHub Actions workflows</code></pre>
</div>
<div class="section level3">
<h3 id="key-r-files-in-r">Key R Files in R/:<a class="anchor" aria-label="anchor" href="#key-r-files-in-r"></a></h3>
<ul><li>
<code>priors.R</code> - Core prior distribution functions</li>
<li>
<code>JAGS-fit.R</code> - JAGS model fitting automation</li>
<li>
<code>JAGS-formula.R</code> - Formula interface for JAGS</li>
<li>
<code>JAGS-marglik.R</code> - Marginal likelihood computation</li>
<li>
<code>model-averaging.R</code> - Bayesian model averaging functions</li>
<li>
<code>summary-tables.R</code> - Result summary and formatting</li>
<li>
<code>tools.R</code> - Input validation and utility functions</li>
</ul></div>
<div class="section level3">
<h3 id="tests-structure-in-teststestthat">Tests Structure in tests/testthat/:<a class="anchor" aria-label="anchor" href="#tests-structure-in-teststestthat"></a></h3>
<ul><li>
<code>test-*.R</code> files contain comprehensive test cases</li>
<li>Uses testthat framework with vdiffr for visual regression testing</li>
<li>Tests integrate with JAGS for realistic Bayesian analysis scenarios</li>
<li>Many tests are conditional (<code>skip_on_cran()</code>, <code>skip_if_not_installed()</code>)</li>
</ul></div>
</div>
<div class="section level2">
<h2 id="github-actions-cicd">GitHub Actions CI/CD<a class="anchor" aria-label="anchor" href="#github-actions-cicd"></a></h2>
<p>The repository uses several workflows: - <strong>R-CMD-check.yaml</strong>: Runs across Windows, Ubuntu, and macOS with full CRAN checks - <strong>R-test.yaml</strong>: Focused unit testing on Windows - <strong>test-coverage.yaml</strong>: Code coverage reporting - <strong>pkgdown.yaml</strong>: Documentation site generation</p>
<p>All workflows handle JAGS installation automatically for their respective platforms.</p>
</div>
<div class="section level2">
<h2 id="development-workflow">Development Workflow<a class="anchor" aria-label="anchor" href="#development-workflow"></a></h2>
<ol style="list-style-type: decimal"><li>
<strong>Make changes</strong>: Edit R files in R/ directory</li>
<li>
<strong>Update docs</strong>: Run <code><a href="https://devtools.r-lib.org/reference/document.html" class="external-link">devtools::document()</a></code> if you modified roxygen2 comments</li>
<li>
<strong>Install locally</strong>: Run <code><a href="https://devtools.r-lib.org/reference/install.html" class="external-link">devtools::install()</a></code> to test changes</li>
<li>
<strong>Validate basic functionality</strong>: Test core features work as expected</li>
<li>
<strong>Run targeted tests</strong>: Use <code>devtools::test(filter = "XXX")</code> to test specific functionality during development</li>
<li>
<strong>Run full tests</strong>: Run <code><a href="https://devtools.r-lib.org/reference/test.html" class="external-link">devtools::test()</a></code> for comprehensive validation before finalizing</li>
<li>
<strong>CRAN check</strong>: Run <code><a href="http://r-lib.github.io/rcmdcheck/reference/rcmdcheck.html" class="external-link">rcmdcheck::rcmdcheck()</a></code> to ensure CRAN compliance</li>
<li>
<strong>Commit</strong>: Ensure .gitignore excludes build artifacts (check/, Rplots.pdf, etc.)</li>
</ol></div>
<div class="section level2">
<h2 id="performance-considerations">Performance Considerations<a class="anchor" aria-label="anchor" href="#performance-considerations"></a></h2>
<ul><li>Functions may be called repeatedly in downstream packages - optimize accordingly</li>
<li>JAGS model fitting can be computationally intensive - tests reflect realistic usage</li>
<li>Use efficient data structures for prior objects and posterior samples</li>
<li>Consider memory usage for large posterior sample arrays</li>
</ul></div>
<div class="section level2">
<h2 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a></h2>
<ul><li>
<strong>JAGS not found</strong>: Ensure JAGS &gt;= 4.3.0 is installed system-wide</li>
<li>
<strong>Test failures</strong>: Visual tests (vdiffr) may fail on different systems - this is often acceptable</li>
<li>
<strong>Package won’t install</strong>: Check that all dependencies are available, especially rjags</li>
<li>
<strong>Long test times</strong>: This is normal - Bayesian computation is inherently time-intensive</li>
<li>
<strong>Memory issues</strong>: Some tests work with large posterior samples - ensure adequate RAM</li>
</ul></div>
<div class="section level2">
<h2 id="example-validation-commands">Example Validation Commands<a class="anchor" aria-label="anchor" href="#example-validation-commands"></a></h2>
<p>After making changes, validate with these commands:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Test basic functionality</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fbartos.github.io/BayesTools/" class="external-link">BayesTools</a></span><span class="op">)</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/prior.html">prior</a></span><span class="op">(</span><span class="st">"normal"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Test JAGS integration (if JAGS-related changes)</span></span>
<span><span class="va">data_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>, N <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">priors_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mu <span class="op">=</span> <span class="fu"><a href="reference/prior.html">prior</a></span><span class="op">(</span><span class="st">"normal"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">model_syntax</span> <span class="op">&lt;-</span> <span class="st">"model{ for(i in 1:N){ x[i] ~ dnorm(mu, 1) } }"</span></span>
<span><span class="co"># Note: Full JAGS test requires more setup and time</span></span></code></pre></div>
<p>Always ensure changes maintain backward compatibility and follow the existing code patterns in the package.</p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>



      <footer><div class="copyright">
  <p></p><p>Developed by František Bartoš.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

